# ููุฒุงุช ุฅุถุงููุฉ ููุชุดูุฉ ูู Turath.io API

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุจุนุฏ ุชุญููู ุงูุงุณุชุฌุงุจุฉ ุงููุนููุฉ ูู API ูููุน Turath.ioุ ุงูุชุดููุง ูุนูููุงุช ููููุฉ ุฌุฏุงู ูููู ุงุณุชุฎุฏุงููุง ูุชุญุณูู ุงูุณูุฑูุจุช ุจุดูู ูุจูุฑ!

---

## ๐ ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ ุงููุชููุฑุฉ

### 1. **ุนุฏุฏ ุงูุตูุญุงุช ุงูุฏููู** (`volume_bounds`)

```json
"indexes": {
  "volume_bounds": {
    "1": [1, 67]  // ุงููุฌูุฏ 1: ูู ุตูุญุฉ 1 ุฅูู 67
  }
}
```

**ุงููุงุฆุฏุฉ**:

- โ ูุนุฑูุฉ ุนุฏุฏ ุงูุตูุญุงุช ุจุงูุถุจุท ูุจู ุงูุจุฏุก
- โ ุนุฑุถ ุดุฑูุท ุชูุฏู ุฏููู (Progress Bar)
- โ ุนุฏู ุงูุญุงุฌุฉ ููุงูุชุธุงุฑ ุญุชู ูุญุตู ุนูู ุฎุทุฃ 404

**ููุฏ ุงูุงุณุชุฎุฑุงุฌ**:

```javascript
function getTotalPages(volumeBounds) {
  let maxPage = 0;
  Object.values(volumeBounds).forEach(([start, end]) => {
    if (end > maxPage) maxPage = end;
  });
  return maxPage;
}

// ุงูุงุณุชุฎุฏุงู:
const totalPages = getTotalPages(bookInfo.indexes.volume_bounds); // 67
console.log(`๐ ุฅุฌูุงูู ุงูุตูุญุงุช: ${totalPages}`);
```

---

### 2. **ููุฑุณ ุงููุชุงุจ ุงููุงูู** (`headings`)

```json
"headings": [
  {
    "title": "ุงูุญุฏูุซ ุงูุฃูู: [ุงูุฃุนูุงู ุจุงูููุงุช]",
    "level": 3,
    "page": 5
  },
  {
    "title": "ุงูุญุฏูุซ ุงูุซุงูู: [ูุฑุงุชุจ ุงูุฏูู]",
    "level": 3,
    "page": 6
  }
]
```

**ุงููุงุฆุฏุฉ**:

- โ ุฅุถุงูุฉ ููุฑุณ ูุญุชููุงุช ูู ุจุฏุงูุฉ ุงูููู
- โ ุฅุถุงูุฉ ุนูุงููู ุงูุฃุจูุงุจ ูููุงุตู ูู ุงูููู
- โ ุชุญุณูู ูุงุจููุฉ ุงููุฑุงุกุฉ ูุงูุชููู

**ููุฏ ุฅูุดุงุก ููุฑุณ ุงููุญุชููุงุช**:

```javascript
function generateTableOfContents(headings) {
  let toc = '\n\n';
  toc += 'โ'.repeat(60) + '\n';
  toc += '๐ ููุฑุณ ุงููุญุชููุงุช\n';
  toc += 'โ'.repeat(60) + '\n\n';
  
  headings.forEach((heading, index) => {
    // ุงููุณุงูุฉ ุงูุจุงุฏุฆุฉ ุญุณุจ ุงููุณุชูู
    const indent = '  '.repeat(heading.level - 1);
    
    // ุฑูุฒ ุญุณุจ ุงููุณุชูู
    const bullet = heading.level === 1 ? 'โช' : 
                   heading.level === 2 ? 'โข' : 
                   'โฆ';
    
    toc += `${indent}${bullet} ${heading.title} ... ุตูุญุฉ ${heading.page}\n`;
  });
  
  toc += '\n' + 'โ'.repeat(60) + '\n\n';
  return toc;
}
```

**ูุซุงู ุนูู ุงูุฅุฎุฑุงุฌ**:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ููุฑุณ ุงููุญุชููุงุช
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โช [ุงูุฃุฑุจุนูู ุงูููููุฉ] ... ุตูุญุฉ 4
  โข [ุฎุทุจุฉ ุงูุฅูุงู ุงููููู] ... ุตูุญุฉ 4
  โข [ุงูุฃุญุงุฏูุซ] ... ุตูุญุฉ 5
    โฆ ุงูุญุฏูุซ ุงูุฃูู: [ุงูุฃุนูุงู ุจุงูููุงุช] ... ุตูุญุฉ 5
    โฆ ุงูุญุฏูุซ ุงูุซุงูู: [ูุฑุงุชุจ ุงูุฏูู] ... ุตูุญุฉ 6
    โฆ ุงูุญุฏูุซ ุงูุซุงูุซ: [ุฃุฑูุงู ุงูุฅุณูุงู] ... ุตูุญุฉ 7
โช [ุฒูุงุฏุงุช ุงุจู ุฑุฌุจ ุงูุญูุจูู] ... ุตูุญุฉ 59
  โข ุงูุญุฏูุซ ุงูุซุงูุซ ูุงูุฃุฑุจุนูู ... ุตูุญุฉ 60

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### 3. **ูุนูููุงุช ุชูุตูููุฉ ุนู ุงููุชุงุจ** (`meta.info`)

```json
"info": "ุงููุชุงุจ: ุงูุฃุฑุจุนูู ุงูููููุฉ...\nุงููุคูู: ูุญูู ุงูุฏูู ุงููููู...\nุงููุญูู: ุงูุดุฑุจููู ุจู ูุงูู ุงูุดุฑุจููู\nุนุฏุฏ ุงูุตูุญุงุช: ูฆูง"
```

**ุงููุงุฆุฏุฉ**:

- โ ุงุณุชุฎุฑุงุฌ ุงุณู ุงููุคูู
- โ ุงุณุชุฎุฑุงุฌ ุงุณู ุงููุญูู
- โ ุฅุถุงูุฉ ูุนูููุงุช ุบููุฉ ูู header ุงูููู

**ููุฏ ุงูุงุณุชุฎุฑุงุฌ**:

```javascript
function parseBookMetadata(info) {
  const metadata = {};
  
  // ุงุณุชุฎุฑุงุฌ ุงุณู ุงููุชุงุจ
  const bookMatch = info.match(/ุงููุชุงุจ:\s*([^\n]+)/);
  metadata.bookName = bookMatch ? bookMatch[1].trim() : null;
  
  // ุงุณุชุฎุฑุงุฌ ุงููุคูู
  const authorMatch = info.match(/ุงููุคูู:\s*([^\n]+)/);
  metadata.author = authorMatch ? authorMatch[1].trim() : null;
  
  // ุงุณุชุฎุฑุงุฌ ุงููุญูู
  const editorMatch = info.match(/ุงููุญูู:\s*([^\n]+)/);
  metadata.editor = editorMatch ? editorMatch[1].trim() : null;
  
  // ุงุณุชุฎุฑุงุฌ ูู ุฑุงุฌุนู
  const reviewerMatch = info.match(/ุฑุงุฌุนูุง ููุฏู ููุง:\s*([^\n]+)/);
  metadata.reviewer = reviewerMatch ? reviewerMatch[1].trim() : null;
  
  // ุงุณุชุฎุฑุงุฌ ุนุฏุฏ ุงูุตูุญุงุช (ุงูุฃุฑูุงู ุงูุนุฑุจูุฉ)
  const pagesMatch = info.match(/ุนุฏุฏ ุงูุตูุญุงุช:\s*([ู-ูฉ0-9]+)/);
  if (pagesMatch) {
    // ุชุญููู ุงูุฃุฑูุงู ุงูุนุฑุจูุฉ ุฅูู ุฅูุฌููุฒูุฉ
    const arabicToEnglish = {
      'ู': '0', 'ูก': '1', 'ูข': '2', 'ูฃ': '3', 'ูค': '4',
      'ูฅ': '5', 'ูฆ': '6', 'ูง': '7', 'ูจ': '8', 'ูฉ': '9'
    };
    const numStr = pagesMatch[1].replace(/[ู-ูฉ]/g, d => arabicToEnglish[d]);
    metadata.pages = parseInt(numStr);
  }
  
  return metadata;
}
```

**ูุซุงู ุงูุงุณุชุฎุฏุงู**:

```javascript
const metadata = parseBookMetadata(bookInfo.meta.info);

console.log(`๐ ุงููุชุงุจ: ${metadata.bookName}`);
console.log(`โ๏ธ  ุงููุคูู: ${metadata.author}`);
console.log(`๐ ุงููุญูู: ${metadata.editor}`);
console.log(`๐ ุนุฏุฏ ุงูุตูุญุงุช: ${metadata.pages}`);

// ุงูุฅุฎุฑุงุฌ:
// ๐ ุงููุชุงุจ: ุงูุฃุฑุจุนูู ุงูููููุฉ (ูุน ุฒูุงุฏุงุช ุงุจู ุฑุฌุจ ุฑุญูููุง ุงููู)
// โ๏ธ  ุงููุคูู: ูุญูู ุงูุฏูู ุงููููู (ูฆูฃูก - ูฆูงูฆ ูู) ูุงุจู ุฑุฌุจ ุงูุญูุจูู (ูงูฃูฆ - ูงูฉูฅ ูู)
// ๐ ุงููุญูู: ุงูุดุฑุจููู ุจู ูุงูู ุงูุดุฑุจููู
// ๐ ุนุฏุฏ ุงูุตูุญุงุช: 67
```

---

### 4. **ุฏุนู ุงููุชุจ ูุชุนุฏุฏุฉ ุงููุฌูุฏุงุช**

```javascript
function getAllVolumes(volumeBounds) {
  return Object.keys(volumeBounds).map(vol => ({
    volume: vol,
    startPage: volumeBounds[vol][0],
    endPage: volumeBounds[vol][1],
    totalPages: volumeBounds[vol][1] - volumeBounds[vol][0] + 1
  }));
}

// ูุซุงู: ูุชุงุจ ูู 3 ูุฌูุฏุงุช
// volume_bounds: { "1": [1, 300], "2": [301, 600], "3": [601, 850] }
const volumes = getAllVolumes(bookInfo.indexes.volume_bounds);

console.log('๐ ุงููุฌูุฏุงุช ุงููุชููุฑุฉ:');
volumes.forEach(vol => {
  console.log(`  ุงููุฌูุฏ ${vol.volume}: ุตูุญุงุช ${vol.startPage}-${vol.endPage} (${vol.totalPages} ุตูุญุฉ)`);
});

// ุงูุฅุฎุฑุงุฌ:
// ๐ ุงููุฌูุฏุงุช ุงููุชููุฑุฉ:
//   ุงููุฌูุฏ 1: ุตูุญุงุช 1-300 (300 ุตูุญุฉ)
//   ุงููุฌูุฏ 2: ุตูุญุงุช 301-600 (300 ุตูุญุฉ)
//   ุงููุฌูุฏ 3: ุตูุญุงุช 601-850 (250 ุตูุญุฉ)
```

---

### 5. **ุฅุถุงูุฉ ุนูุงููู ุงูุฃุจูุงุจ ูููุงุตู**

ุจุฏูุงู ูู ูุงุตู ุจุณูุทุ ูููููุง ุฅุถุงูุฉ ุนููุงู ุงูุจุงุจ/ุงููุตู ุนูุฏ ุจุฏุงูุฉ ูู ูุณู:

```javascript
function getHeadingForPage(pageNumber, headings) {
  // ุงูุจุญุซ ุนู ุขุฎุฑ ุนููุงู ูุจู ุฃู ุนูุฏ ูุฐู ุงูุตูุญุฉ
  let currentHeading = null;
  
  for (const heading of headings) {
    if (heading.page === pageNumber) {
      return heading;
    }
  }
  
  return null;
}

// ูู ุงูุญููุฉ ุงูุฑุฆูุณูุฉ:
const heading = getHeadingForPage(pageNumber, bookInfo.indexes.headings);

let separator;
if (heading) {
  // ุฅุฐุง ูุงูุช ูุฐู ุงูุตูุญุฉ ุจุฏุงูุฉ ุจุงุจ/ูุตู
  const level = heading.level;
  const symbol = level === 1 ? 'โ' : level === 2 ? 'โ' : 'ยท';
  
  separator = `\n${symbol.repeat(60)}\n`;
  separator += `๐ ${heading.title}\n`;
  separator += `${symbol.repeat(60)}\n`;
  separator += `ุตูุญุฉ ${pageNumber}\n\n`;
} else {
  // ูุงุตู ุนุงุฏู
  separator = `\n${'โ'.repeat(60)}\nุตูุญุฉ ${pageNumber}\n${'โ'.repeat(60)}\n\n`;
}
```

**ูุซุงู ุนูู ุงูุฅุฎุฑุงุฌ**:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุงูุญุฏูุซ ุงูุฃูู: [ุงูุฃุนูุงู ุจุงูููุงุช]
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ุตูุญุฉ 5

ุฅููุง ุงูุฃุนูุงู ุจุงูููุงุชุ ูุฅููุง ููู ุงูุฑุฆ ูุง ููู...

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ุตูุญุฉ 6

[ุชุชูุฉ ุงูุญุฏูุซ...]

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุงูุญุฏูุซ ุงูุซุงูู: [ูุฑุงุชุจ ุงูุฏูู: ุงูุฅุณูุงู ูุงูุฅููุงู ูุงูุฅุญุณุงู]
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ุตูุญุฉ 7

ุนู ุนูุฑ ุจู ุงูุฎุทุงุจ ุฑุถู ุงููู ุนูู ูุงู...
```

---

## ๐ ููุงุฑูุฉ ุจูู ุงููุณุฎุฉ ุงูุฃุณุงุณูุฉ ูุงููุญุณููุฉ

| ุงูููุฒุฉ | ุงููุณุฎุฉ ุงูุฃุณุงุณูุฉ | ุงููุณุฎุฉ ุงููุญุณููุฉ |
|--------|-----------------|-----------------|
| ูุนุฑูุฉ ุนุฏุฏ ุงูุตูุญุงุช | โ ูุง | โ ูุนู (ูู `volume_bounds`) |
| ุดุฑูุท ุงูุชูุฏู | โ๏ธ ุชูุฑูุจู | โ ุฏููู (ูุณุจุฉ ูุฆููุฉ) |
| ููุฑุณ ุงููุญุชููุงุช | โ ูุง | โ ูุนู (ูุงูู ูููุณู) |
| ุนูุงููู ุงูุฃุจูุงุจ | โ ูุง | โ ูุนู (ูููุงุตู) |
| ูุนูููุงุช ุงููุคูู | โ ูุง | โ ูุนู (ูุคููุ ูุญููุ ูุฑุงุฌุน) |
| ูุนูุงุฑ ุงูุชููู | โ๏ธ ุฎุทุฃ 404 | โ ุงููุตูู ูุขุฎุฑ ุตูุญุฉ |
| ุฌูุฏุฉ ุงูููู ุงูููุงุฆู | โญโญโญ | โญโญโญโญโญ |

---

## โจ ุงูุฎูุงุตุฉ

ุจูุถู ุงูุจูุงูุงุช ุงูุบููุฉ ุงูุชู ูููุฑูุง API ูููุน Turath.ioุ ูููููุง ุฅูุดุงุก ุณูุฑูุจุช ูุชูุฏู ุฌุฏุงู ูููุฑ:

1. โ **ุฏูุฉ ุนุงููุฉ**: ูุนุฑูุฉ ุนุฏุฏ ุงูุตูุญุงุช ุจุงูุถุจุท
2. โ **ุชูุธูู ููุชุงุฒ**: ููุฑุณ ูุญุชููุงุช ูุงูู
3. โ **ูุงุจููุฉ ูุฑุงุกุฉ ุฃูุถู**: ุนูุงููู ุงูุฃุจูุงุจ ูููุงุตู
4. โ **ูุนูููุงุช ุดุงููุฉ**: ุจูุงูุงุช ุงููุคูู ูุงููุญูู
5. โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณููุฉ**: ุดุฑูุท ุชูุฏู ุฏููู

**ุฑุงุฌุน ุงูููู ุงูุฃูู `turath_scraper_discussion.md` ููุญุตูู ุนูู ุงูููุฏ ุงููุงูู!** ๐
