# ๐ ุฏููู ุงุฎุชุจุงุฑ ุงูุจุญุซ - pages_v3

## โ ุชู ุงูุงูุชูุงุก ูู ุงูุฅุนุฏุงุฏ!

### ุงูุญุงูุฉ ุงูุญุงููุฉ:
- โ **ุงูููุฑุณ**: pages_v3 ูุชุตู ูุฌุงูุฒ
- โ **Alias**: pages_active ูุดูุฑ ุฅูู pages_v3
- โ **Laravel**: ูุชุตู ููุณุชุฎุฏู pages_active
- โ **ุงูุตูุญุงุช ุงููููุฑุณุฉ**: ~3.5 ููููู ุตูุญุฉ (66%)
- โณ **ุงูููุฑุณุฉ**: ูุณุชูุฑุฉ ุชููุงุฆูุงู ูู 30 ุซุงููุฉ

---

## ๐ฏ ุทุฑู ุงูุงุฎุชุจุงุฑ:

### 1๏ธโฃ ุงุฎุชุจุงุฑ HTML ุงููุจุงุดุฑ (ุงูุฃุณูู):
ุงูุชุญ ุงูููู ูู ุงููุชุตูุญ:
```
C:\Users\osaid\Documents\BMS_alkamelah\test-search.html
```

**ุงูููุฒุงุช:**
- โจ ูุงุฌูุฉ ุฌูููุฉ ูุณููุฉ
- ๐ ุนุฑุถ ุนุฏุฏ ุงูุตูุญุงุช ุงููููุฑุณุฉ ูุจุงุดุฑุฉ
- ๐ ุจุญูุซุงุช ุณุฑูุนุฉ ุฌุงูุฒุฉ
- ๐ก Highlighting ูููุชุงุฆุฌ
- ๐ ุนุฏุงุฏ ุงููุชุงุฆุฌ

### 2๏ธโฃ ุงุฎุชุจุงุฑ ุนุจุฑ Laravel:
ุงูุชุญ ุงูุฑุงุจุท ูู ุงููุชุตูุญ:
```
http://localhost/search?q=ูุญูุฏ
```

ุฃู ุฃู ุฑุงุจุท ุจุญุซ ูู ูููุนู ุงูุญุงูู.

### 3๏ธโฃ ุงุฎุชุจุงุฑ ูุจุงุดุฑ ุนุจุฑ PowerShell:
```powershell
# ุงุฎุชุจุงุฑ ุนุฏุฏ ุงููุชุงุฆุฌ
$result = Invoke-RestMethod -Method Post -Uri "http://145.223.98.97:9201/pages_v3/_search" -ContentType "application/json" -Body '{"size":0,"query":{"query_string":{"query":"ูุญูุฏ","default_field":"content"}}}'
Write-Host "ุงููุชุงุฆุฌ: $($result.hits.total.value)"
```

---

## ๐งช ุจุญูุซุงุช ููุชุฑุญุฉ ููุงุฎุชุจุงุฑ:

### ุจุญูุซุงุช ุฃุณุงุณูุฉ:
- `ูุญูุฏ` - ูุฌุจ ุฃู ูุนุทู ูุชุงุฆุฌ ูุซูุฑุฉ
- `ุงูุตูุงุฉ` - ููู ูููุญุชูู ุงููููู
- `ุงููุฑุขู` - ูุฌุจ ุฃู ูุนุทู ุขูุงู ุงููุชุงุฆุฌ
- `ุงูููู` - ุชุตููู ุฃุณุงุณู
- `ุงูุญุฏูุซ` - ูุญุชูู ููู

### ุจุญูุซุงุช ูุชูุฏูุฉ:
- `ุฃุจู ุญูููุฉ` - ุงุณู ุนูููู
- `ุงูุดุงูุนู` - ูุฐูุจ ูููู
- `ุตูุงุฉ ุงูุฌูุนุฉ` - ุนุจุงุฑุฉ ูุฑูุจุฉ
- `ุงูุฒูุงุฉ ูุงูุตูุงู` - ูููุงุช ูุชุนุฏุฏุฉ

### ุงุฎุชุจุงุฑ Character Normalization:
- `ุตูุงุฉ` vs `ุตูุงู` - ูุฌุจ ุฃู ุชุนุทู ููุณ ุงููุชุงุฆุฌ
- `ุฅุณูุงู` vs `ุงุณูุงู` - ูุฌุจ ุฃู ุชุนุทู ููุณ ุงููุชุงุฆุฌ
- `ุงููุฑุขู` vs `ุงููุฑุงู` - ูุฌุจ ุฃู ุชุนุทู ููุณ ุงููุชุงุฆุฌ

---

## ๐ ุงูููุงุฑูุฉ ูุน ุงูููุฑุณ ุงููุฏูู:

### ุงูููุฑุณ ุงููุฏูู (pages):
```powershell
$old = Invoke-RestMethod -Method Post -Uri "http://145.223.98.97:9201/pages/_search" -ContentType "application/json" -Body '{"size":0,"query":{"match":{"content":"ุงูุตูุงุฉ"}}}'
Write-Host "pages (ุงููุฏูู): $($old.hits.total.value) ูุชูุฌุฉ"
```

### ุงูููุฑุณ ุงูุฌุฏูุฏ (pages_v3):
```powershell
$new = Invoke-RestMethod -Method Post -Uri "http://145.223.98.97:9201/pages_v3/_search" -ContentType "application/json" -Body '{"size":0,"query":{"query_string":{"query":"ุงูุตูุงุฉ","default_field":"content"}}}'
Write-Host "pages_v3 (ุงูุฌุฏูุฏ): $($new.hits.total.value) ูุชูุฌุฉ"
```

---

## ๐ง ุงูุฅุตูุงุญุงุช ุงููุทุจููุฉ:

### โ ูุง ุชู ุฅุตูุงุญู:
1. **Alias pages_active** - ููุชุจุฏูู ุงูุณูุณ ุจูู ุงูููุงุฑุณ
2. **Laravel Connection** - ูุณุชุฎุฏู pages_active ุชููุงุฆูุงู
3. **Query Method** - ุชู ุงูุชุบููุฑ ูู `match` ุฅูู `query_string` ูุคูุชุงู
4. **ุงูุญููู ุงูุฅุถุงููุฉ**:
   - โ book_title
   - โ book_author
   - โ book_section
   - โ book_section_id

### โ๏ธ ูุดุงูู ูุนุฑููุฉ:
1. **match query ูุง ุชุนูู** - ุจุณุจุจ ูุดููุฉ ูู analyzer (ุญู ูุคูุช ูุทุจูู)
2. **author_ids ููููุฏ** - ุชู ุฅูุบุงุคู ุจุณุจุจ GROUP BY
   - **ุงูุญู**: ูููู ุฌูุจู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูุฏ ุงูุญุงุฌุฉ

---

## ๐ ูุฑุงูุจุฉ ุงูููุฑุณุฉ:

### ูุนุฑุถ ุงูุชูุฏู ุงููุจุงุดุฑ:
```powershell
.\monitor-indexing.ps1
```

### ูุญุต ุณุฑูุน ููุนุฏุฏ:
```powershell
$count = (Invoke-RestMethod -Method Get -Uri "http://145.223.98.97:9201/pages_v3/_count").count
Write-Host "ุงูุตูุญุงุช ุงููููุฑุณุฉ: $($count.ToString('N0'))" -ForegroundColor Green
```

---

## ๐ฌ ูุง ุจุนุฏ ุงูุงุฎุชุจุงุฑ:

ุจุนุฏ ูุง ุชุฌุฑุจ ุงูุจุญุซ ูุชุชุฃูุฏ ุฃูู ูุดุชุบู ูููุญ:

### โ ุฅุฐุง ุงูุจุญุซ ุดุบุงู ููุชุงุฒ:
1. **ุฎููู ุงูููุฑุณุฉ ุชููู** - ุฑุงุญ ุชุงุฎุฐ ูู ุณุงุนุฉ
2. **ุฑุงูุจ ุงูุชูุฏู** ุจู monitor-indexing.ps1
3. **ููุง ุชุฎูุต ุงูููุฑุณุฉ** ุฑุงุญ ูููู ุนูุฏู 5.3 ููููู ุตูุญุฉ ุฌุงูุฒุฉ

### โ ุฅุฐุง ูู ูุดุงูู:
1. **ุฃุฎุจุฑูู ุจุงูุชูุตูู** - ุดู ุงููุดููุฉ
2. **ูููู ูุนูุฏ ุงูููุฑุณุฉ** - ุจุฅุนุฏุงุฏุงุช ูุฎุชููุฉ
3. **ุฃู ูุญู ุงููุดููุฉ** - ุญุณุจ ููุน ุงูุฎุทุฃ

---

## ๐ ุฃูุงูุฑ ูููุฏุฉ:

### ูุญุต ุญุงูุฉ ุงูู Alias:
```powershell
Invoke-RestMethod -Method Get -Uri "http://145.223.98.97:9201/_cat/aliases/pages_active?v"
```

### ูุญุต ุนุฏุฏ ุงููุณุชูุฏุงุช:
```powershell
Invoke-RestMethod -Method Get -Uri "http://145.223.98.97:9201/pages_v3/_count"
```

### ุนููุฉ ูู ุงูุจูุงูุงุช:
```powershell
Invoke-RestMethod -Method Get -Uri "http://145.223.98.97:9201/pages_v3/_search?size=1" | ConvertTo-Json -Depth 10
```

### ุฅููุงู ุงูููุฑุณุฉ:
```powershell
docker stop bms_logstash_arabic
```

### ุงุณุชุฆูุงู ุงูููุฑุณุฉ:
```powershell
docker start bms_logstash_arabic
```

---

## ๐ ููุงุญุธุงุช ูููุฉ:

1. **ุงูููุฑุณุฉ ูุณุชูุฑุฉ ุชููุงุฆูุงู** - ูุง ุฏุงุนู ููุนู ุฃู ุดูุก
2. **ุงูุจุญุซ ุฌุงูุฒ ุงูุขู** - ููู ุงูููุฑุณุฉ ูุง ุฎูุตุช
3. **pages_v3 ููู 66% ูู ุงูุตูุญุงุช** - ุงููุชุงุฆุฌ ุฑุงุญ ุชุชุญุณู ูุน ุงูููุช
4. **character normalization ุดุบุงู** - ุฉ/ูุ ุฃ/ุงุ ุงูุฎ
5. **Laravel ูุชุตู ุชููุงุฆูุงู** - ุนุจุฑ alias pages_active

---

โจ **ุฌุฑุจ ุงูุจุญุซ ุงูุขู ูุฃุฎุจุฑูู ุจุงููุชุงุฆุฌ!** โจ
