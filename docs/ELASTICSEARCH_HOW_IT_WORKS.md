# ğŸ“– How Elasticsearch Works - Complete Guide
# ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Elasticsearch - Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„

---

## ğŸŒ English Section

### What is Elasticsearch?

**Elasticsearch** is a distributed, RESTful search and analytics engine capable of solving a growing number of use cases. It is the heart of the Elastic Stack and centrally stores your data for lightning fast search, fineâ€‘tuned relevancy, and powerful analytics that scale with ease.

### Core Concepts

#### 1. Documents

A **document** is a basic unit of information that can be indexed. In our case, each page from a book is a document.

```json
{
  "id": 12345,
  "content": "Ù‡Ø°Ø§ Ù†Øµ Ù…Ù† ØµÙØ­Ø© ÙÙŠ ÙƒØªØ§Ø¨ ÙÙ‚Ù‡ÙŠ",
  "page_number": 42,
  "book_id": 123,
  "book_title": "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø´Ø±Ø­ Ø§Ù„Ù…Ù‡Ø°Ø¨",
  "author_names": "Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ù†ÙˆÙˆÙŠ"
}
```

#### 2. Index

An **index** is a collection of documents that have somewhat similar characteristics. Think of it as a database.

| Concept | Elasticsearch | Traditional Database |
|---------|--------------|---------------------|
| Database | Cluster | Database Server |
| Table | Index | Table |
| Row | Document | Row |
| Column | Field | Column |

#### 3. Shards and Replicas

- **Shard**: A single Lucene index. An index can be divided into multiple shards.
- **Replica**: A copy of a shard for high availability.

```
Index: pages_new_search
â”œâ”€â”€ Primary Shard 0 â”€â”€â”€ Replica 0
â”œâ”€â”€ Primary Shard 1 â”€â”€â”€ Replica 1
â””â”€â”€ Primary Shard 2 â”€â”€â”€ Replica 2
```

### How Search Works

```mermaid
graph LR
    A[User Query<br>Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: Ø§Ù„ØµÙ„Ø§Ø©] --> B[Elasticsearch]
    B --> C{Analyzer}
    C --> D[Tokenizer<br>Split into tokens]
    D --> E[Token Filters<br>Normalize, Stem]
    E --> F[Inverted Index]
    F --> G[Matching Documents]
    G --> H[Relevance Scoring]
    H --> I[Return Results]
```

### The Inverted Index

This is the secret behind Elasticsearch's speed. Instead of searching through every document, it maintains an index of all unique terms.

**Traditional Search:**
```
Document 1: "Ø§Ù„ØµÙ„Ø§Ø© ÙØ±ÙŠØ¶Ø©"
Document 2: "ÙƒØªØ§Ø¨ Ø§Ù„ØµÙ„Ø§Ø©"
Document 3: "Ø£Ø­ÙƒØ§Ù… Ø§Ù„ØµÙˆÙ…"

To find "Ø§Ù„ØµÙ„Ø§Ø©" â†’ Scan ALL documents
```

**Inverted Index:**
```
Term       â†’ Document IDs
Ø§Ù„ØµÙ„Ø§Ø©     â†’ [1, 2]
ÙØ±ÙŠØ¶Ø©      â†’ [1]
ÙƒØªØ§Ø¨       â†’ [2]
Ø£Ø­ÙƒØ§Ù…      â†’ [3]
Ø§Ù„ØµÙˆÙ…      â†’ [3]

To find "Ø§Ù„ØµÙ„Ø§Ø©" â†’ Instant lookup! â†’ [1, 2]
```

### Analyzers for Arabic Text

Elasticsearch uses **analyzers** to process text during indexing and searching.

#### Components of an Analyzer:

1. **Character Filters**: Transform text before tokenization
2. **Tokenizer**: Splits text into tokens (words)
3. **Token Filters**: Transform tokens (lowercase, stems, etc.)

#### Three Arabic Analyzers:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     1. Arabic Exact                          â”‚
â”‚          "Ø§Ù„ØµÙ„Ø§Ø©" â†’ ["Ø§Ù„ØµÙ„Ø§Ø©"]                              â”‚
â”‚          No modification - exact matching                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     2. Arabic Flexible                        â”‚
â”‚          "Ø§Ù„ØµÙ„Ø§Ø©" â†’ ["ØµÙ„Ø§Ù‡"]                                 â”‚
â”‚          Removes: Ø§Ù„ØŒ Ø£â†’Ø§ØŒ Ø©â†’Ù‡ (normalization only)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     3. Arabic Stemmed                         â”‚
â”‚          "Ø§Ù„ØµÙ„Ø§Ø©" â†’ ["ØµÙ„"]                                   â”‚
â”‚          Extracts root (Ø¬Ø°Ø±) - finds ØµÙ„Ù‰ØŒ ÙŠØµÙ„ÙŠØŒ ØµÙ„ÙˆØ§Øª        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Query Types

#### 1. Match Query
Finds documents containing the query terms.

```json
{
  "query": {
    "match": {
      "content": "Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø±"
    }
  }
}
```

#### 2. Match Phrase Query
Finds documents with exact phrase.

```json
{
  "query": {
    "match_phrase": {
      "content": "ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø±"
    }
  }
}
```

#### 3. Bool Query
Combines multiple conditions.

```json
{
  "query": {
    "bool": {
      "must": [
        { "match": { "content": "Ø§Ù„ØµÙ„Ø§Ø©" } }
      ],
      "filter": [
        { "term": { "book_section_id": 5 } }
      ]
    }
  }
}
```

### Relevance Scoring

Elasticsearch calculates a **_score** for each document based on:

1. **TF (Term Frequency)**: How often does the term appear in the document?
2. **IDF (Inverse Document Frequency)**: How rare is the term across all documents?
3. **Field Length**: Shorter fields get higher scores

```
Score = TF Ã— IDF Ã— Field Boost
```

---

## ğŸŒ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ

### Ù…Ø§ Ù‡Ùˆ ElasticsearchØŸ

**Elasticsearch** Ù‡Ùˆ Ù…Ø­Ø±Ùƒ Ø¨Ø­Ø« ÙˆØªØ­Ù„ÙŠÙ„Ø§Øª Ù…ÙˆØ²Ø¹ØŒ Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ Ø­Ù„ Ø¹Ø¯Ø¯ Ù…ØªØ²Ø§ÙŠØ¯ Ù…Ù† Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…. ÙŠØ®Ø²Ù† Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø±ÙƒØ²ÙŠØ§Ù‹ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹ Ø¬Ø¯Ø§Ù‹ØŒ ØµÙ„Ø© Ø¯Ù‚ÙŠÙ‚Ø©ØŒ ÙˆØªØ­Ù„ÙŠÙ„Ø§Øª Ù‚ÙˆÙŠØ© ØªØªÙˆØ³Ø¹ Ø¨Ø³Ù‡ÙˆÙ„Ø©.

### Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

#### 1. Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª (Documents)

**Ø§Ù„Ù…Ø³ØªÙ†Ø¯** Ù‡Ùˆ ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ† ÙÙ‡Ø±Ø³ØªÙ‡Ø§. ÙÙŠ Ø­Ø§Ù„ØªÙ†Ø§ØŒ ÙƒÙ„ ØµÙØ­Ø© Ù…Ù† ÙƒØªØ§Ø¨ Ù‡ÙŠ Ù…Ø³ØªÙ†Ø¯.

```json
{
  "id": 12345,
  "content": "Ù‡Ø°Ø§ Ù†Øµ Ù…Ù† ØµÙØ­Ø© ÙÙŠ ÙƒØªØ§Ø¨ ÙÙ‚Ù‡ÙŠ",
  "page_number": 42,
  "book_id": 123,
  "book_title": "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø´Ø±Ø­ Ø§Ù„Ù…Ù‡Ø°Ø¨",
  "author_names": "Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ù†ÙˆÙˆÙŠ"
}
```

#### 2. Ø§Ù„ÙÙ‡Ø±Ø³ (Index)

**Ø§Ù„ÙÙ‡Ø±Ø³** Ù‡Ùˆ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„ØªÙŠ Ù„Ù‡Ø§ Ø®ØµØ§Ø¦Øµ Ù…ØªØ´Ø§Ø¨Ù‡Ø©. ÙÙƒØ± ÙÙŠÙ‡ ÙƒÙ‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª.

| Ø§Ù„Ù…ÙÙ‡ÙˆÙ… | Elasticsearch | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© |
|---------|--------------|-------------------------|
| Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª | Cluster | Ø®Ø§Ø¯Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª |
| Ø§Ù„Ø¬Ø¯ÙˆÙ„ | Index | Ø§Ù„Ø¬Ø¯ÙˆÙ„ |
| Ø§Ù„ØµÙ | Document | Ø§Ù„ØµÙ |
| Ø§Ù„Ø¹Ù…ÙˆØ¯ | Field | Ø§Ù„Ø¹Ù…ÙˆØ¯ |

#### 3. Ø§Ù„Ù€ Shards ÙˆØ§Ù„Ù†Ø³Ø®

- **Shard**: ÙÙ‡Ø±Ø³ Lucene Ù…ÙØ±Ø¯. ÙŠÙ…ÙƒÙ† ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ÙÙ‡Ø±Ø³ Ø¥Ù„Ù‰ Ø¹Ø¯Ø© shards.
- **Replica**: Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù€ shard Ù„Ù„ØªÙˆØ§ÙØ± Ø§Ù„Ø¹Ø§Ù„ÙŠ.

### ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¨Ø­Ø«

```mermaid
graph TD
    A[Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…<br>Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: Ø§Ù„ØµÙ„Ø§Ø©] --> B[Elasticsearch]
    B --> C{Ø§Ù„Ù…Ø­Ù„Ù„ Analyzer}
    C --> D[Ø§Ù„Ù…Ù‚Ø³Ù‘Ù… Tokenizer<br>ØªÙ‚Ø³ÙŠÙ… Ø¥Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª]
    D --> E[Ù…Ø±Ø´Ø­Ø§Øª Ø§Ù„ÙƒÙ„Ù…Ø§Øª<br>ØªØ·Ø¨ÙŠØ¹ØŒ ØªØ¬Ø°ÙŠØ±]
    E --> F[Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù…Ù‚Ù„ÙˆØ¨]
    F --> G[Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©]
    G --> H[Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ù‡Ù…ÙŠØ©]
    H --> I[Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬]
```

### Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù…Ù‚Ù„ÙˆØ¨ (Inverted Index)

Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø³Ø± ÙˆØ±Ø§Ø¡ Ø³Ø±Ø¹Ø© Elasticsearch. Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¨Ø­Ø« ÙÙŠ ÙƒÙ„ Ù…Ø³ØªÙ†Ø¯ØŒ ÙŠØ­ØªÙØ¸ Ø¨ÙÙ‡Ø±Ø³ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„ÙØ±ÙŠØ¯Ø©.

**Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ:**
```
Ø§Ù„Ù…Ø³ØªÙ†Ø¯ 1: "Ø§Ù„ØµÙ„Ø§Ø© ÙØ±ÙŠØ¶Ø©"
Ø§Ù„Ù…Ø³ØªÙ†Ø¯ 2: "ÙƒØªØ§Ø¨ Ø§Ù„ØµÙ„Ø§Ø©"
Ø§Ù„Ù…Ø³ØªÙ†Ø¯ 3: "Ø£Ø­ÙƒØ§Ù… Ø§Ù„ØµÙˆÙ…"

Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† "Ø§Ù„ØµÙ„Ø§Ø©" â† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
```

**Ø§Ù„ÙÙ‡Ø±Ø³ Ø§Ù„Ù…Ù‚Ù„ÙˆØ¨:**
```
Ø§Ù„Ù…ØµØ·Ù„Ø­    â† Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
Ø§Ù„ØµÙ„Ø§Ø©     â† [1, 2]
ÙØ±ÙŠØ¶Ø©      â† [1]
ÙƒØªØ§Ø¨       â† [2]
Ø£Ø­ÙƒØ§Ù…      â† [3]
Ø§Ù„ØµÙˆÙ…      â† [3]

Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† "Ø§Ù„ØµÙ„Ø§Ø©" â† Ø¨Ø­Ø« ÙÙˆØ±ÙŠ! â† [1, 2]
```

### Ø§Ù„Ù…Ø­Ù„Ù„Ø§Øª Ù„Ù„Ù†Øµ Ø§Ù„Ø¹Ø±Ø¨ÙŠ

ÙŠØ³ØªØ®Ø¯Ù… Elasticsearch **Ø§Ù„Ù…Ø­Ù„Ù„Ø§Øª (Analyzers)** Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Øµ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙÙ‡Ø±Ø³Ø© ÙˆØ§Ù„Ø¨Ø­Ø«.

#### Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø­Ù„Ù„:

1. **Ù…Ø±Ø´Ø­Ø§Øª Ø§Ù„Ø£Ø­Ø±Ù (Character Filters)**: ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ù‚Ø¨Ù„ Ø§Ù„ØªÙ‚Ø³ÙŠÙ…
2. **Ø§Ù„Ù…Ù‚Ø³Ù‘Ù… (Tokenizer)**: ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª
3. **Ù…Ø±Ø´Ø­Ø§Øª Ø§Ù„ÙƒÙ„Ù…Ø§Øª (Token Filters)**: ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª (ØªØµØºÙŠØ±ØŒ ØªØ¬Ø°ÙŠØ±ØŒ Ø¥Ù„Ø®)

#### Ø«Ù„Ø§Ø«Ø© Ù…Ø­Ù„Ù„Ø§Øª Ø¹Ø±Ø¨ÙŠØ©:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 1. Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚ (Exact)                      â”‚
â”‚          "Ø§Ù„ØµÙ„Ø§Ø©" â† ["Ø§Ù„ØµÙ„Ø§Ø©"]                               â”‚
â”‚          Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„ - Ù…Ø·Ø§Ø¨Ù‚Ø© Ø­Ø±ÙÙŠØ©                           â”‚
â”‚          ÙŠØ¬Ø¯: "Ø§Ù„ØµÙ„Ø§Ø©" ÙÙ‚Ø·                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 2. Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø±Ù† (Flexible)                     â”‚
â”‚          "Ø§Ù„ØµÙ„Ø§Ø©" â† ["ØµÙ„Ø§Ù‡"]                                 â”‚
â”‚          ÙŠØ²ÙŠÙ„: Ø§Ù„ØŒ Ø£â†’Ø§ØŒ Ø©â†’Ù‡ (ØªØ·Ø¨ÙŠØ¹ ÙÙ‚Ø·)                      â”‚
â”‚          ÙŠØ¬Ø¯: "ØµÙ„Ø§Ø©"ØŒ "Ø§Ù„ØµÙ„Ø§Ø©"ØŒ "Ø¨Ø§Ù„ØµÙ„Ø§Ø©"ØŒ "ÙˆØ§Ù„ØµÙ„Ø§Ø©"          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 3. Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØµØ±ÙÙŠ (Morphological)               â”‚
â”‚          "Ø§Ù„ØµÙ„Ø§Ø©" â† ["ØµÙ„"]                                   â”‚
â”‚          ÙŠØ³ØªØ®Ø±Ø¬ Ø§Ù„Ø¬Ø°Ø± (Øµ-Ù„-ÙŠ)                                â”‚
â”‚          ÙŠØ¬Ø¯: "ØµÙ„Ù‰"ØŒ "ÙŠØµÙ„ÙŠ"ØŒ "ØµÙ„ÙˆØ§Øª"ØŒ "Ù…ØµÙ„Ù"ØŒ "ØµÙ„Ø§Ø©"          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª

#### 1. Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© (Match Query)
ÙŠØ¬Ø¯ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„Ø¨Ø­Ø«.

```json
{
  "query": {
    "match": {
      "content": "Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø±"
    }
  }
}
```

#### 2. Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© (Match Phrase Query)
ÙŠØ¬Ø¯ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù…Ø¹ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø¨Ø§Ù„Ø¶Ø¨Ø·.

```json
{
  "query": {
    "match_phrase": {
      "content": "ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø±"
    }
  }
}
```

#### 3. Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ (Bool Query)
ÙŠØ¬Ù…Ø¹ Ø¹Ø¯Ø© Ø´Ø±ÙˆØ·.

```json
{
  "query": {
    "bool": {
      "must": [
        { "match": { "content": "Ø§Ù„ØµÙ„Ø§Ø©" } }
      ],
      "filter": [
        { "term": { "book_section_id": 5 } }
      ]
    }
  }
}
```

### Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ù‡Ù…ÙŠØ© (Relevance Scoring)

ÙŠØ­Ø³Ø¨ Elasticsearch **Ø¯Ø±Ø¬Ø© (_score)** Ù„ÙƒÙ„ Ù…Ø³ØªÙ†Ø¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰:

1. **TF (ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…ØµØ·Ù„Ø­)**: ÙƒÙ… Ù…Ø±Ø© ÙŠØ¸Ù‡Ø± Ø§Ù„Ù…ØµØ·Ù„Ø­ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ØŸ
2. **IDF (Ø§Ù„ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¹ÙƒØ³ÙŠ)**: Ù…Ø§ Ù…Ø¯Ù‰ Ù†Ø¯Ø±Ø© Ø§Ù„Ù…ØµØ·Ù„Ø­ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§ØªØŸ
3. **Ø·ÙˆÙ„ Ø§Ù„Ø­Ù‚Ù„**: Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ù‚ØµØ± ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø¯Ø±Ø¬Ø§Øª Ø£Ø¹Ù„Ù‰

```
Ø§Ù„Ø¯Ø±Ø¬Ø© = TF Ã— IDF Ã— Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„ØªØ¹Ø²ÙŠØ²
```

---

## ğŸ“š Key Terminology / Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

| English | Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© | Description |
|---------|---------|-------------|
| Index | ÙÙ‡Ø±Ø³ | Collection of documents |
| Document | Ù…Ø³ØªÙ†Ø¯ | Single searchable item |
| Field | Ø­Ù‚Ù„ | Attribute of a document |
| Analyzer | Ù…Ø­Ù„Ù„ | Text processor |
| Tokenizer | Ù…Ù‚Ø³Ù‘Ù… | Splits text into words |
| Query | Ø§Ø³ØªØ¹Ù„Ø§Ù… | Search request |
| Score | Ø¯Ø±Ø¬Ø© | Relevance ranking |
| Shard | Ø¬Ø²Ø¡ | Subdivision of index |
| Replica | Ù†Ø³Ø®Ø© | Copy of shard |
| Mapping | Ø®Ø±ÙŠØ·Ø© | Schema definition |

---

## ğŸ”— Related Files

- [Elasticsearch Health Check](file:///c:/Users/osaidsalah002/Documents/BMS_alkamelah/docs/ELASTICSEARCH_HEALTH_CHECK.md)
- [Elasticsearch in This Project](file:///c:/Users/osaidsalah002/Documents/BMS_alkamelah/docs/ELASTICSEARCH_IN_PROJECT.md)
